{"ast":null,"code":"import _classCallCheck from \"/home/nineleaps/upload/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nineleaps/upload/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nineleaps/upload/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nineleaps/upload/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nineleaps/upload/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nineleaps/upload/src/Login.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport { GoogleLogin } from \"react-google-login\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n\n    _this.logout = function () {\n      _this.setState({\n        isAuthenticated: false,\n        token: \"\",\n        user: null\n      });\n    };\n\n    _this.googleResponse = function (response) {\n      console.log(response);\n      var id_token = response.getAuthResponse().id_token;\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", \"http://192.168.1.20:8080/v1/signin\");\n      xhr.setRequestHeader(\"WE\", \"tokenId\");\n\n      xhr.onload = function () {\n        var data = xhr.responseText;\n        console.log(\"Signed in as: \" + data);\n        window.localStorage.setItem('data', view);\n        console.log(view); // let json = JSON.parse(xhr.responseText);\n        // let View = json.view;\n        // console.log(View[\"view\"]);\n      };\n\n      xhr.send(id_token);\n      window.localStorage.setItem(\"tokenId\", id_token);\n      var token = window.localStorage.getItem(\"tokenId\");\n      console.log(token);\n      window.location.href = \"/Toolbar\";\n    };\n\n    _this.onFailure = function (error) {\n      console.log(\"****************\");\n      alert(error);\n    };\n\n    _this.state = {\n      isAuthenticated: false,\n      user: null,\n      token: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var content = !!this.state.isAuthenticated ? React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Authenticated\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, this.state.user.email), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.googleResponse,\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Log out\"))) : React.createElement(\"div\", {\n        className: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Welcome To Document Management System\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Login To access dcouments\"), React.createElement(GoogleLogin, {\n        clientId: \"467598396544-usbqpbfg4h2v6282tdr64dgim05klu5v.apps.googleusercontent.com\",\n        buttonText: \"Login\",\n        onSuccess: this.googleResponse,\n        onFailure: this.onFailure,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      })));\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, content);\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/nineleaps/upload/src/Login.js"],"names":["React","Component","GoogleLogin","Login","logout","setState","isAuthenticated","token","user","googleResponse","response","console","log","id_token","getAuthResponse","xhr","XMLHttpRequest","open","setRequestHeader","onload","data","responseText","window","localStorage","setItem","view","send","getItem","location","href","onFailure","error","alert","state","content","email"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { GoogleLogin } from \"react-google-login\";\n\nclass Login extends Component {\n    constructor() {\n        super();\n        this.state = { isAuthenticated: false, user: null, token: \"\" };\n    }\n\n    logout = () => {\n        this.setState({ isAuthenticated: false, token: \"\", user: null });\n    };\n\n    googleResponse = response => {\n        console.log(response);\n\n        let id_token = response.getAuthResponse().id_token;\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", \"http://192.168.1.20:8080/v1/signin\");\n\n        xhr.setRequestHeader(\"WE\", \"tokenId\");\n        xhr.onload = function () {\n            let data=xhr.responseText\n            console.log(\"Signed in as: \" + data);   \n            window.localStorage.setItem('data',view)\n           console.log(view)\n            // let json = JSON.parse(xhr.responseText);\n            // let View = json.view;\n            // console.log(View[\"view\"]);\n        };\n\n        xhr.send(id_token);\n        window.localStorage.setItem(\"tokenId\", id_token);\n        let token = window.localStorage.getItem(\"tokenId\");\n        console.log(token);\n\n\n        window.location.href = \"/Toolbar\";\n    };\n    onFailure = error => {\n        console.log(\"****************\");\n        alert(error);\n    };\n\n    render() {\n        let content = !!this.state.isAuthenticated ? (\n            <div className=\"App\">\n                <p>Authenticated</p>\n\n                <div>{this.state.user.email}</div>\n                <div>\n                    <button onClick={this.googleResponse} className=\"button\">\n                        Log out\n          </button>\n                </div>\n            </div>\n        ) : (\n                <div className=\"body\">\n                    <div className=\"login\">\n                        <h1>Welcome To Document Management System</h1>\n                        <h2>Login To access dcouments</h2>\n                        {/* <Link to='/Navbar'> */}\n                        <GoogleLogin\n                            clientId=\"467598396544-usbqpbfg4h2v6282tdr64dgim05klu5v.apps.googleusercontent.com\"\n                            buttonText=\"Login\"\n                            onSuccess={this.googleResponse}\n                            onFailure={this.onFailure}\n                        />\n                        {/* </Link> */}\n                    </div>\n                </div>\n            );\n\n        return <div className=\"App\">{content}</div>;\n    }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}